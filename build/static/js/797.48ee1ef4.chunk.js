"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[797,18,701],{88018:(e,s,a)=>{a.r(s),a.d(s,{default:()=>x});var r=a(72791),l=a(61134),i=a(78983),d=a(24846),c=a(99161),n=a(93647),t=a(29655),o=(a(5462),a(52608)),m=a(88329),u=a(80184);const x=()=>{const{register:e,handleSubmit:s}=(0,l.cI)(),[a,x]=(0,r.useState)(!1),[h,j]=(0,r.useState)(""),p=m.Z.get("admin"),b=JSON.parse(p);return(0,u.jsx)("div",{className:"bg-light min-vh-100 profile",children:(0,u.jsx)(i.KB,{className:"profile-container",children:(0,u.jsx)(i.rb,{children:(0,u.jsx)(i.b7,{children:(0,u.jsx)(i.dL,{children:(0,u.jsx)(i.xH,{className:"p-4",children:(0,u.jsx)(i.sl,{children:(0,u.jsxs)(i.lx,{onSubmit:s((async(e,s)=>{x(!0),(0,o.Cp)(e).then((e=>{200===e.status&&e.data.success?(s.target.reset(),t.Am.success(e.data.message),x(!1)):(j(e.data.message),x(!1))})).catch((e=>{console.log(e.response),e.response.status,t.Am.error(e.response.data.message),x(!1)}))})),children:[(0,u.jsx)("h2",{className:"text-center mb-4",children:"Change Password"}),(0,u.jsx)(t.Ix,{}),(0,u.jsx)("div",{in:h,children:(0,u.jsx)("p",{className:"errors",children:h||""})}),(0,u.jsxs)(i.YR,{className:"mb-4",children:[(0,u.jsx)(i.jO,{...e("_id"),type:"hidden",value:b.id}),(0,u.jsx)(i.wV,{children:(0,u.jsx)(d.Z,{icon:c.E})}),(0,u.jsx)(i.jO,{...e("oldPassword",{required:"Old Password is required"}),type:"password",placeholder:"oldPassword",autoComplete:"current-password"})]}),(0,u.jsxs)(i.YR,{className:"mb-4",children:[(0,u.jsx)(i.wV,{children:(0,u.jsx)(d.Z,{icon:n.U})}),(0,u.jsx)(i.jO,{...e("newPassword",{required:"New password is required"}),type:"password",placeholder:"new-password",autoComplete:"current-password"})]}),(0,u.jsxs)(i.YR,{className:"mb-4",children:[(0,u.jsx)(i.wV,{children:(0,u.jsx)(d.Z,{icon:n.U})}),(0,u.jsx)(i.jO,{...e("confirmPassword",{required:"confirm password is required"}),type:"password",placeholder:"confirm Password",autoComplete:"current-password"})]}),(0,u.jsx)(i.rb,{className:"update-button",children:(0,u.jsx)(i.b7,{xs:12,md:4,className:"mb-2 mb-md-0",children:(0,u.jsx)(i.u5,{type:"submit",className:"w-100 custom-color",style:{cursor:a?"not-allowed":"pointer"},children:a?"Loading...":"Reset Password"})})})]})})})})})})})})}},84701:(e,s,a)=>{a.r(s),a.d(s,{default:()=>x});var r=a(72791),l=a(61134),i=a(78983),d=a(24846),c=a(99161),n=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M16,112V496H496V112ZM236.8,341.6a32.167,32.167,0,0,0,38.4,0L298.667,324,464,448v16H48V448L213.333,324ZM256,316,48,160V144H464v16ZM48,200,186.667,304,48,408ZM464,408,325.333,304,464,200Z' class='ci-primary'/>"],t=a(29655),o=(a(5462),a(52608)),m=a(88329),u=a(80184);const x=()=>{const{register:e,getValues:s,setValue:a,handleSubmit:x,control:h,clearErrors:j,formState:{errors:p}}=(0,l.cI)(),[b,g]=(0,r.useState)(!1),[f,w]=(0,r.useState)(),N=m.Z.get("admin"),v=N?JSON.parse(N):null;return(0,r.useEffect)((()=>{v&&(a("name",v.name),a("email",v.email))}),[v,a]),(0,u.jsx)("div",{className:"bg-light profile",children:(0,u.jsx)(i.KB,{className:"profile-container",children:(0,u.jsx)(i.rb,{children:(0,u.jsx)(i.b7,{children:(0,u.jsx)(i.dL,{children:(0,u.jsx)(i.xH,{className:"p-4 mb-4 profile-card",children:(0,u.jsx)(i.sl,{children:(0,u.jsxs)(i.lx,{onSubmit:x((async e=>{w(""),g(!0);let s=new FormData;Object.keys(e).forEach((function(a){"image"===a?void 0!==e[a][0]&&s.append(a,e[a][0]):s.append(a,e[a])})),(0,o.Ot)(s).then((e=>{const s=e.data.info.data;if(e.data.isSuccess&&200===e.status){const r={name:s.name,id:s._id,email:s.email,img:s.image?e.data.info.baseUrl+s.image:null};a("name",s.name),m.Z.set("admin",JSON.stringify(r),{sameSite:"Strict",secure:!0}),t.Am.success("Updated successfully!")}else w(e.data.message||"Something went wrong!");g(!1)})).catch((e=>{var s,a;console.log(e);const r=(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Something Went Wrong!";w(r),t.Am.error(r),g(!1)}))})),children:[(0,u.jsx)("h2",{className:"text-center mb-4",children:"Edit Your Profile"}),(0,u.jsx)("div",{in:f,children:(0,u.jsx)("p",{className:"errors",children:f||""})}),(0,u.jsx)(i.jO,{...e("_id"),type:"hidden",value:null===v||void 0===v?void 0:v.id}),(0,u.jsxs)(i.YR,{className:"mb-4",children:[(0,u.jsx)(i.wV,{children:(0,u.jsx)(d.Z,{icon:c.E})}),(0,u.jsx)(t.Ix,{}),(0,u.jsx)(i.jO,{...e("name",{required:"Name is required"}),placeholder:"Name",defaultValue:null===v||void 0===v?void 0:v.name,autoComplete:"current-name"})]}),(0,u.jsxs)(i.YR,{className:"mb-4",children:[(0,u.jsx)(i.wV,{children:(0,u.jsx)(d.Z,{icon:n})}),(0,u.jsx)(i.jO,{...e("email"),type:"text",autoComplete:"current-email",disabled:!0,defaultValue:null===v||void 0===v?void 0:v.email})]}),(0,u.jsx)(i.YR,{className:"mb-4",children:(0,u.jsx)(i.jO,{type:"file",accept:"image/*",...e("image"),id:"image","aria-label":"file example"})}),(0,u.jsx)(i.rb,{className:"update-button",children:(0,u.jsx)(i.b7,{xs:12,sm:4,className:"mb-2 mb-md-0 ",children:(0,u.jsx)(i.u5,{type:"submit",className:"w-100 custom-color",disabled:b,children:b?"Loading...":"Update"})})})]})})})})})})})})}},74797:(e,s,a)=>{a.r(s),a.d(s,{default:()=>c});a(72791);var r=a(78983),l=(a(5462),a(84701)),i=a(88018),d=a(80184);const c=()=>(0,d.jsx)("div",{className:"bg-light min-vh-100 profile",children:(0,d.jsx)(r.KB,{className:"profile-container",children:(0,d.jsxs)(r.rb,{children:[(0,d.jsx)(r.b7,{lg:6,xs:12,children:(0,d.jsx)(r.dL,{children:(0,d.jsx)(r.sl,{children:(0,d.jsx)(l.default,{})})})}),(0,d.jsx)(r.b7,{lg:6,xs:12,children:(0,d.jsx)(r.dL,{children:(0,d.jsx)(r.sl,{children:(0,d.jsx)(i.default,{})})})})]})})})}}]);
//# sourceMappingURL=797.48ee1ef4.chunk.js.map