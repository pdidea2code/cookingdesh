{"version":3,"file":"static/js/984.50ddccc8.chunk.js","mappings":"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","sources":["views/pages/recipe/nutrition/NutritionAdd.jsx","../node_modules/@coreui/icons/src/free/cil-plus.ts"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCol,\n  CContainer,\n  CForm,\n  CFormInput,\n  CFormLabel,\n  CRow,\n  CSpinner,\n  CFormText,\n  CFormSelect,\n} from '@coreui/react'\nimport { useForm, useFieldArray } from 'react-hook-form'\nimport CIcon from '@coreui/icons-react'\nimport { cilPlus } from '@coreui/icons'\nimport { addIngredient, addNutrition } from 'src/redux/api/api'\nimport { ToastContainer, toast } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\nimport { useLocation, useNavigate } from 'react-router-dom'\n\nconst NutritionAdd = () => {\n  const [isLoading, setIsLoading] = useState(false)\n  const { state } = useLocation()\n  const navigate = useNavigate()\n\n  const {\n    register,\n    control,\n    handleSubmit,\n    formState: { errors },\n  } = useForm({\n    defaultValues: {\n      elements: [{ name: '', amount: '', unitId: '', idValue: '' }],\n    },\n  })\n\n  const { fields, append, remove } = useFieldArray({\n    control,\n    name: 'elements',\n  })\n\n  const handleAddElement = () => {\n    append({ name: '', amount: '', idValue: state.id })\n  }\n\n  const handleRemoveElement = (index) => {\n    remove(index)\n  }\n\n  const onSubmit = async (data) => {\n    setIsLoading(true)\n    try {\n      const transformedData = data.elements.map((item) => ({\n        name: item.name,\n        amount: item.amount,\n        recipeid: state.id,\n      }))\n\n      const response = await addNutrition(transformedData)\n\n      toast.success('Data submitted successfully!')\n      navigate('/Nutrition', { state: { id: state.id } })\n    } catch (error) {\n      console.error('Error submitting form data:', error)\n      toast.error('Error submitting form data.')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <>\n      <CContainer className=\"mt-3\">\n        <CRow>\n          <CCol md={12}>\n            <CCard>\n              <CCardHeader>\n                <strong>Nutrition Form</strong>\n              </CCardHeader>\n              <CCardBody className=\"mt-3\">\n                <ToastContainer />\n                <CForm className=\"row g-3\" onSubmit={handleSubmit(onSubmit)}>\n                  {fields.map((field, index) => (\n                    <CRow key={field.id} className=\"mb-3 align-items-end\">\n                      <CCol xl={3} md={12}>\n                        <CFormLabel>Name</CFormLabel>\n                        <CFormInput\n                          type=\"text\"\n                          {...register(`elements.${index}.name`, {\n                            required: 'Name is required',\n                          })}\n                          invalid={!!errors.elements?.[index]?.name}\n                          placeholder=\"Name\"\n                        />\n                        {errors.elements?.[index]?.name && (\n                          <CFormText className=\"text-danger\">\n                            {errors.elements[index].name.message}\n                          </CFormText>\n                        )}\n                      </CCol>\n                      <CCol xl={3} md={12}>\n                        <CFormLabel>Amount</CFormLabel>\n                        <CFormInput\n                          type=\"text\"\n                          {...register(`elements.${index}.amount`, {\n                            required: 'Amount is required',\n                          })}\n                          invalid={!!errors.elements?.[index]?.amount}\n                          placeholder=\"Amount\"\n                        />\n                        {errors.elements?.[index]?.amount && (\n                          <CFormText className=\"text-danger\">\n                            {errors.elements[index].amount.message}\n                          </CFormText>\n                        )}\n                      </CCol>\n\n                      <CCol xl={2} md={12} className=\"mt-2\">\n                        <CButton\n                          onClick={() => handleRemoveElement(index)}\n                          color=\"danger\"\n                          className=\"me-2\"\n                        >\n                          Remove\n                        </CButton>\n                      </CCol>\n                      {index === fields.length - 1 && (\n                        <CCol xl={1} md={12}>\n                          <CButton onClick={handleAddElement} color=\"primary\" className=\"me-2\">\n                            <CIcon icon={cilPlus} />\n                          </CButton>\n                        </CCol>\n                      )}\n                    </CRow>\n                  ))}\n                  <CRow className=\"mt-3\">\n                    <CCol md={12} className=\"text-center\">\n                      {isLoading ? (\n                        <CButton disabled>\n                          <CSpinner component=\"span\" size=\"sm\" aria-hidden=\"true\" />\n                          Loading...\n                        </CButton>\n                      ) : (\n                        <CButton type=\"submit\" className=\"AddButton\">\n                          Submit\n                        </CButton>\n                      )}\n                    </CCol>\n                  </CRow>\n                </CForm>\n              </CCardBody>\n            </CCard>\n          </CCol>\n        </CRow>\n      </CContainer>\n    </>\n  )\n}\n\nexport default NutritionAdd\n","export var cilPlus = [\"512 512\", \"<polygon fill='var(--ci-primary-color, currentColor)' points='440 240 272 240 272 72 240 72 240 240 72 240 72 272 240 272 240 440 272 440 272 272 440 272 440 240' class='ci-primary'/>\"];\n"],"names":["NutritionAdd","isLoading","setIsLoading","useState","state","useLocation","navigate","useNavigate","register","control","handleSubmit","formState","errors","useForm","defaultValues","elements","name","amount","unitId","idValue","fields","append","remove","useFieldArray","handleAddElement","id","_jsx","_Fragment","children","CContainer","className","CRow","CCol","md","_jsxs","CCard","CCardHeader","CCardBody","ToastContainer","CForm","onSubmit","async","transformedData","data","map","item","recipeid","addNutrition","toast","success","error","console","field","index","_errors$elements","_errors$elements$inde","_errors$elements2","_errors$elements2$ind","_errors$elements3","_errors$elements3$ind","_errors$elements4","_errors$elements4$ind","xl","CFormLabel","CFormInput","type","concat","required","invalid","placeholder","CFormText","message","CButton","onClick","handleRemoveElement","color","length","CIcon","icon","cilPlus","disabled","CSpinner","component","size"],"sourceRoot":""}