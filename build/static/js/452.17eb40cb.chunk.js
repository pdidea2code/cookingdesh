"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[452],{47452:(e,i,l)=>{l.r(i),l.d(i,{default:()=>o});var a=l(72791),d=l(78983),s=l(61134),n=l(52608),r=l(57689),t=l(29655),c=(l(5462),l(80184));const o=()=>{var e,i,l,o,u,m,v,x,h,p,j,g;const{register:y,setValue:f,getValues:b,handleSubmit:C,clearErrors:L,formState:{errors:O}}=(0,s.cI)(),_=(0,r.s0)(),[q,S]=(0,a.useState)(""),[R,k]=(0,a.useState)(""),[T,D]=(0,a.useState)(""),[N,A]=(0,a.useState)(0),[U,w]=(0,a.useState)(null),[V,I]=(0,a.useState)(!1),[F,X]=(0,a.useState)([]),[E,M]=(0,a.useState)([]),[H,P]=(0,a.useState)([]),[B,K]=(0,a.useState)([]),[Q,W]=(0,a.useState)([]),{state:z}=(0,r.TH)(),G=(e,i)=>{L(e),f(e,i),"contentType"===e&&A(i)};return(0,a.useEffect)((()=>{if(z){const{editData:e,imageUrl:i}=z;S(e._id),f("title",e.title),f("time",e.time),f("description",e.description),f("meal",e.meal),f("diet",e.diet),f("cuisine",e.cuisine),f("allergie",e.allergie),f("category",e.category),k(i+e.image),"0"==e.videotype?(f("videourl",e.videourl),A(0)):(A(1),w(i+e.video)),D(i+e.audio)}(async()=>{try{const[e,i,l,a,d]=await Promise.all([(0,n.vL)(),(0,n.yR)(),(0,n.e9)(),(0,n.fM)(),(0,n.KQ)()]);X(e.data.info),M(i.data.info),K(l.data.info),P(a.data.info.diet),W(d.data.info.category)}catch(e){t.Am.error("Failed to fetch data")}})()}),[]),(0,c.jsx)("div",{className:"bg-light min-vh-100",children:(0,c.jsx)(d.KB,{className:"mt-3",children:(0,c.jsx)(d.rb,{children:(0,c.jsx)(d.b7,{md:8,children:(0,c.jsxs)(d.xH,{children:[(0,c.jsx)(d.bn,{children:(0,c.jsx)("strong",{children:"Recipe Form"})}),(0,c.jsxs)(d.sl,{children:[(0,c.jsx)(t.Ix,{}),(0,c.jsxs)(d.lx,{className:"row g-3 ",onSubmit:C((async e=>{I(!0);const i=new FormData;Object.keys(e).forEach((function(l){"image"===l||"video"===l||"audio"===l?void 0!==e[l][0]&&i.append(l,e[l][0]):i.append(l,e[l])}));try{""===q?(await(0,n.XD)(i),t.Am.success("Recipe added successfully")):(await(0,n.DI)(i,q),t.Am.success("Recipe updated successfully")),_("/recipe")}catch(l){t.Am.error("Error processing request")}finally{I(!1)}})),children:[(0,c.jsxs)(d.b7,{xl:6,md:12,children:[(0,c.jsx)(d.L8,{children:"Recipe Title"}),(0,c.jsx)(d.jO,{type:"text",id:"validationDefault01",...y("title",{required:"Title is required"}),placeholder:"Title",invalid:!!O.title}),(0,c.jsx)(d.CO,{invalid:!0,children:null===(e=O.title)||void 0===e?void 0:e.message})]}),(0,c.jsxs)(d.b7,{xl:6,md:12,children:[(0,c.jsx)(d.L8,{children:"Recipe Time"}),(0,c.jsx)(d.jO,{type:"text",id:"validationDefault01",...y("time",{required:"Recipe time is required"}),placeholder:"Time",invalid:!!O.time}),(0,c.jsx)(d.CO,{invalid:!0,children:null===(i=O.time)||void 0===i?void 0:i.message})]}),(0,c.jsxs)(d.b7,{xl:6,md:12,children:[(0,c.jsx)(d.L8,{children:"Meal"}),(0,c.jsxs)(d.LX,{id:"meal",name:"meal",...y("meal",{required:"Meal is required"}),invalid:!!O.meal,value:b("meal"),onChange:e=>G("meal",e.target.value),children:[(0,c.jsx)("option",{value:"",children:"Select Meal"}),null===F||void 0===F?void 0:F.map((e=>(0,c.jsx)("option",{value:e._id,children:e.name},e._id)))]}),(0,c.jsx)(d.CO,{invalid:!0,children:null===(l=O.meal)||void 0===l?void 0:l.message})]}),(0,c.jsxs)(d.b7,{xl:6,md:12,children:[(0,c.jsx)(d.L8,{children:"Diet"}),(0,c.jsxs)(d.LX,{id:"diet",name:"diet",...y("diet",{required:"Diet is required"}),invalid:!!O.diet,value:b("diet"),onChange:e=>G("diet",e.target.value),children:[(0,c.jsx)("option",{value:"",children:"Select Diet"}),null===H||void 0===H?void 0:H.map((e=>(0,c.jsx)("option",{value:e._id,children:e.name},e._id)))]}),(0,c.jsx)(d.CO,{invalid:!0,children:null===(o=O.diet)||void 0===o?void 0:o.message})]}),(0,c.jsxs)(d.b7,{xl:6,md:12,children:[(0,c.jsx)(d.L8,{children:"Cuisine"}),(0,c.jsxs)(d.LX,{id:"cuisine",name:"cuisine",...y("cuisine",{required:"Cuisine is required"}),invalid:!!O.cuisine,value:b("cuisine"),onChange:e=>G("cuisine",e.target.value),children:[(0,c.jsx)("option",{value:"",children:"Select Cuisine"}),null===B||void 0===B?void 0:B.map((e=>(0,c.jsx)("option",{value:e._id,children:e.name},e._id)))]}),(0,c.jsx)(d.CO,{invalid:!0,children:null===(u=O.cuisine)||void 0===u?void 0:u.message})]}),(0,c.jsxs)(d.b7,{xl:6,md:12,children:[(0,c.jsx)(d.L8,{children:"Allergie"}),(0,c.jsxs)(d.LX,{id:"allergie",name:"allergie",...y("allergie",{required:"Allergie is required"}),invalid:!!O.allergie,value:b("allergie"),onChange:e=>G("allergie",e.target.value),children:[(0,c.jsx)("option",{value:"",children:"Select Allergie"}),null===E||void 0===E?void 0:E.map((e=>(0,c.jsx)("option",{value:e._id,children:e.name},e._id)))]}),(0,c.jsx)(d.CO,{invalid:!0,children:null===(m=O.allergie)||void 0===m?void 0:m.message})]}),(0,c.jsxs)(d.b7,{xl:6,md:12,children:[(0,c.jsx)(d.L8,{children:"Category"}),(0,c.jsxs)(d.LX,{id:"category",name:"category",...y("category",{required:"Category is required"}),invalid:!!O.category,value:b("category"),onChange:e=>G("category",e.target.value),children:[(0,c.jsx)("option",{value:"",children:"Select Category"}),null===Q||void 0===Q?void 0:Q.map((e=>(0,c.jsx)("option",{value:e._id,children:e.name},e._id)))]}),(0,c.jsx)(d.CO,{invalid:!0,children:null===(v=O.category)||void 0===v?void 0:v.message})]}),(0,c.jsxs)(d.b7,{md:12,children:[(0,c.jsx)(d.L8,{children:"Description"}),(0,c.jsx)(d.PB,{type:"text",id:"validationDefault01",...y("description",{required:"Description is required"}),placeholder:"Description",invalid:!!O.description}),(0,c.jsx)(d.CO,{invalid:!0,children:null===(x=O.description)||void 0===x?void 0:x.message})]}),(0,c.jsxs)(d.b7,{xl:6,md:12,children:[(0,c.jsx)(d.L8,{children:"Recipe Image"}),(0,c.jsx)(d.jO,{type:"file",name:"image",accept:"image/*",id:"validationDefault01",...y("image",{required:!q&&"Image is required"}),placeholder:"Recipe Image",onChange:e=>{const i=e.target.files[0];if(i){const e=URL.createObjectURL(i);k(e)}else k("")},invalid:!!O.image}),R&&(0,c.jsx)("img",{src:R,className:"img-fluid img-thumbnail",alt:"Selected",style:{maxHeight:"200px",marginTop:"10px"}}),(0,c.jsx)(d.CO,{invalid:!0,children:null===(h=O.image)||void 0===h?void 0:h.message})]}),(0,c.jsxs)(d.b7,{xl:6,md:12,children:[(0,c.jsx)(d.L8,{children:"Recipe Audio"}),(0,c.jsx)(d.jO,{type:"file",name:"audio",accept:"audio/*",id:"validationDefault01",...y("audio"),placeholder:"Recipe Audio",onChange:e=>{const i=e.target.files[0];if(i){const e=URL.createObjectURL(i);D(e)}else D("")}}),T&&(0,c.jsx)("audio",{src:T,controls:!0,className:"audio-player",style:{marginTop:"10px"}}),(0,c.jsx)(d.CO,{invalid:!0,children:null===(p=O.audio)||void 0===p?void 0:p.message})]}),(0,c.jsxs)(d.b7,{xl:6,md:12,children:[(0,c.jsx)("div",{children:(0,c.jsx)(d.L8,{children:"Content Type"})}),(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsxs)("div",{className:"form-check mr-3",children:[(0,c.jsx)("input",{type:"radio",name:"contentType",id:"contentTypeVideo",className:"form-check-input",value:"0",checked:1==N,onChange:()=>A(1)}),(0,c.jsx)("label",{htmlFor:"contentTypeVideo",className:"form-check-label",children:"Video"})]}),(0,c.jsxs)("div",{className:"form-check",children:[(0,c.jsx)("input",{type:"radio",name:"contentType",id:"contentTypeLink",className:"form-check-input",value:"1",checked:0==N,onChange:()=>A(0)}),(0,c.jsx)("label",{htmlFor:"contentTypeLink",className:"form-check-label",children:"Link"})]})]})]}),1===N?(0,c.jsxs)(d.b7,{xl:12,md:12,children:[(0,c.jsx)(d.L8,{children:"Video"}),(0,c.jsx)(d.jO,{type:"file",name:"video",accept:"video/mp4",id:"videoUpload",...y("video"),placeholder:"Video",onChange:e=>{const i=e.target.files[0];if(i&&"video/mp4"===i.type){const e=URL.createObjectURL(i);w(e)}else e.target.value=null,t.Am.error("Invalid video type. Only mp4 files are allowed.")},invalid:!!O.video}),U&&(0,c.jsx)("video",{src:U,className:"video-preview",controls:!0,style:{marginTop:"10px",maxWidth:"100%"}}),(0,c.jsx)(d.CO,{invalid:!0,children:null===(j=O.video)||void 0===j?void 0:j.message})]}):(0,c.jsxs)(d.b7,{xl:12,md:12,children:[(0,c.jsx)(d.L8,{children:"Video Link"}),(0,c.jsx)(d.jO,{type:"text",id:"videourl",...y("videourl",{required:"Title is required"}),placeholder:"Enter video link",invalid:!!O.videoUrl}),(0,c.jsx)(d.CO,{invalid:!0,children:null===(g=O.videoUrl)||void 0===g?void 0:g.message})]}),(0,c.jsx)(d.b7,{xs:12,className:"text-center",children:(0,c.jsx)(d.u5,{color:"primary",type:"submit",disabled:V,children:V?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d.LQ,{size:"sm"})," Please Wait"]}):q?"Update Recipe":"Add Recipe"})})]})]})]})})})})})}}}]);
//# sourceMappingURL=452.17eb40cb.chunk.js.map