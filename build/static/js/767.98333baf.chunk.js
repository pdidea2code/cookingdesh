"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[767],{76767:(e,s,n)=>{n.r(s),n.d(s,{default:()=>u});var a=n(72791),l=n(78983),t=n(61134),r=n(24846),i=n(98030),d=n(52608),c=n(29655),m=(n(5462),n(57689)),o=n(80184);const u=()=>{const[e,s]=(0,a.useState)([]),[n,u]=(0,a.useState)(!1),{state:x}=(0,m.TH)(),h=(0,m.s0)(),{register:j,control:p,handleSubmit:b,formState:{errors:g},setValue:v}=(0,t.cI)({defaultValues:{elements:[{name:"",amount:"",unitId:"",idValue:""}]}}),{fields:f,append:N,remove:_}=(0,t.Dq)({control:p,name:"elements"}),y=()=>{N({name:"",amount:"",unitId:"",idValue:x.editData})};return(0,a.useEffect)((()=>{(async()=>{try{const e=await(0,d.PG)();s(e.data.info)}catch(e){e.response.data.success||c.Am.error(e.response.data.message),u(!1)}})()}),[]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(l.KB,{className:"mt-3",children:(0,o.jsx)(l.rb,{children:(0,o.jsx)(l.b7,{md:12,children:(0,o.jsxs)(l.xH,{children:[(0,o.jsx)(l.bn,{children:(0,o.jsx)("strong",{children:"Ingredient Form"})}),(0,o.jsxs)(l.sl,{className:"mt-3",children:[(0,o.jsx)(c.Ix,{}),(0,o.jsxs)(l.lx,{className:"row g-3",onSubmit:b((async e=>{u(!0);try{const s=e.elements.map((e=>({name:e.name,amount:e.amount,unit:e.unitId||null,recipeid:x.editData})));console.log(s);const n=await(0,d.ME)(s);console.log("API Response:",n.data),c.Am.success("Data submitted successfully!"),h("/Ingredient",{state:{id:x.editData}})}catch(s){console.error("Error submitting form data:",s),c.Am.error("Error submitting form data.")}finally{u(!1)}})),children:[f.map(((s,n)=>{var a,t,d,c,m,u,x,h;return(0,o.jsxs)(l.rb,{className:"mb-3 align-items-end",children:[(0,o.jsxs)(l.b7,{xl:3,md:12,children:[(0,o.jsx)(l.L8,{children:"Name"}),(0,o.jsx)(l.jO,{type:"text",...j("elements.".concat(n,".name"),{required:"Text Value is required"}),invalid:!(null===(a=g.elements)||void 0===a||null===(t=a[n])||void 0===t||!t.name),placeholder:"Text Value"}),(null===(d=g.elements)||void 0===d||null===(c=d[n])||void 0===c?void 0:c.name)&&(0,o.jsx)(l.Jh,{className:"text-danger",children:g.elements[n].name.message})]}),(0,o.jsxs)(l.b7,{xl:3,md:12,children:[(0,o.jsx)(l.L8,{children:"Amount"}),(0,o.jsx)(l.jO,{type:"text",...j("elements.".concat(n,".amount"),{required:"Number Value is required"}),invalid:!(null===(m=g.elements)||void 0===m||null===(u=m[n])||void 0===u||!u.amount),placeholder:"Number Value"}),(null===(x=g.elements)||void 0===x||null===(h=x[n])||void 0===h?void 0:h.amount)&&(0,o.jsx)(l.Jh,{className:"text-danger",children:g.elements[n].amount.message})]}),(0,o.jsxs)(l.b7,{xl:3,md:12,children:[(0,o.jsx)(l.L8,{children:"Unit"}),(0,o.jsxs)(l.LX,{...j("elements.".concat(n,".unitId")),children:[(0,o.jsx)("option",{value:"",children:"Select Unit"}),e.map((e=>(0,o.jsx)("option",{value:e._id,children:e.name},e._id)))]})]}),(0,o.jsx)(l.b7,{xl:2,md:12,className:"mt-2",children:(0,o.jsx)(l.u5,{onClick:()=>(e=>{_(e)})(n),color:"danger",className:"me-2",children:"Remove"})}),n===f.length-1&&(0,o.jsx)(l.b7,{xl:1,md:12,children:(0,o.jsx)(l.u5,{onClick:y,color:"primary",className:"me-2",children:(0,o.jsx)(r.Z,{icon:i.q})})})]},s.id)})),(0,o.jsx)(l.rb,{className:"mt-3",children:(0,o.jsx)(l.b7,{md:12,className:"text-center",children:n?(0,o.jsxs)(l.u5,{disabled:!0,children:[(0,o.jsx)(l.LQ,{component:"span",size:"sm","aria-hidden":"true"}),"Loading..."]}):(0,o.jsx)(l.u5,{type:"submit",className:"AddButton",children:"Add"})})})]})]})]})})})})})}},98030:(e,s,n)=>{n.d(s,{q:()=>a});var a=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='440 240 272 240 272 72 240 72 240 240 72 240 72 272 240 272 240 440 272 440 272 272 440 272 440 240' class='ci-primary'/>"]}}]);
//# sourceMappingURL=767.98333baf.chunk.js.map